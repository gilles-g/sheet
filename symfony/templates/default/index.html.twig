{% extends 'base.html.twig' %}

{% block title %}Stimulus Sheet Demo{% endblock %}

{% block body %}
<div class="container" style="max-width: 800px; margin: 50px auto; padding: 20px;">
    <h1>Welcome to Stimulus Sheet Demo!</h1>
    
    <div style="margin: 30px 0;">
        <p>This is a Symfony 7 application with Webpack Encore and the <strong>stimulus-sheet</strong> component.</p>
        
        <h2>Getting Started</h2>
        <ul>
            <li>Webpack Encore is configured and ready to use</li>
            <li>Stimulus and Turbo are installed</li>
            <li>stimulus-sheet is integrated and ready to use</li>
        </ul>
        
        <h2>Try It Out</h2>
        <button 
            onclick="openExampleSheet()"
            style="background: #4CAF50; color: white; border: none; padding: 12px 24px; cursor: pointer; border-radius: 4px; font-size: 16px;">
            Open Example Sheet
        </button>
    </div>
    
    <div style="margin-top: 40px; padding: 20px; background: #f5f5f5; border-radius: 4px;">
        <h3>Next Steps</h3>
        <ol>
            <li>Build your assets: <code>npm run dev</code></li>
            <li>Start watching for changes: <code>npm run watch</code></li>
            <li>Check out the example at <a href="{{ path('app_sheet_example') }}">/sheet-example</a></li>
            <li>Read the documentation in <code>docs/SYMFONY_INTEGRATION.md</code></li>
        </ol>
    </div>
</div>

<script>
function openExampleSheet() {
    // Get the sheet list controller
    const sheetListElement = document.querySelector('[data-controller="sheet-list"]');
    if (!sheetListElement) {
        alert('Sheet list element not found!');
        return;
    }
    
    // Get the Stimulus application
    const app = window.Stimulus;
    if (!app) {
        alert('Stimulus application not found!');
        return;
    }
    
    const sheetList = app.getControllerForElementAndIdentifier(sheetListElement, 'sheet-list');
    
    if (sheetList) {
        const content = `
            <div class="sheet-content">
                <div class="sheet-header" style="padding: 20px; border-bottom: 1px solid #ddd;">
                    <h2 style="margin: 0;">Example Sheet</h2>
                    <button data-action="click->sheet#close" style="float: right; background: none; border: none; font-size: 24px; cursor: pointer;">&times;</button>
                </div>
                
                <div class="sheet-scrollpane">
                    <div class="sheet-content" style="padding: 20px;">
                        <p>This is an example sheet loaded using stimulus-sheet!</p>
                        <p>You can put any content here:</p>
                        <ul>
                            <li>Forms</li>
                            <li>Details</li>
                            <li>Images</li>
                            <li>Any HTML content</li>
                        </ul>
                        
                        <div style="margin-top: 20px;">
                            <button 
                                data-action="click->sheet#close" 
                                style="background: #2196F3; color: white; border: none; padding: 10px 20px; cursor: pointer; border-radius: 4px;">
                                Close Sheet
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        sheetList.addSheet(content);
    } else {
        alert('Could not get sheet list controller!');
    }
}
</script>
{% endblock %}
